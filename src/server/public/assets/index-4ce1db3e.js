import{_ as v,H as g,j as R,d as h,z as x,r as p,o as i,c as r,a as e,e as y,f as b,w as k,k as C,F as u,m as S,l as E,x as j,q as B,t as f}from"./index-7aa1352b.js";const T={data(){return{id:this.$route.params.id,displayRSS:[],rss:"",ownRSS:[],supportedRSS:[],list:[]}},components:{HEADER:g,submitButton:R},mounted(){this.getPanelRSS()},methods:{async getPanelRSS(){let t={method:"GET",url:"/news/"+this.id,headers:{"Content-Type":"application/json"},withCredentials:!0},s=await h(t);console.log(s.data),this.displayRSS=[],this.displayRSS=s.data},select(t){this.list[t].active||(this.list[t].selected=!this.list[t].selected)},remove(t){confirm("Deseja remover o RSS?")&&this.ownRSS.pop(t)},async checkRSS(){let t=await x(this.rss),s=!1;if(this.ownRSS.filter(n=>{n.link==t.rss&&(s=!0)}),s){alert("Endereço já existe");return}this.ownRSS.push({...t,link:t.rss,active:!0}),this.rss=""},async updateRSS(){let t,s=[];this.displayRSS.filter(l=>{l.delete&&s.push(l.id)}),t={method:"POST",url:"/news/delete",headers:{"Content-Type":"application/json"},withCredentials:!0,data:s},await h(t);let n=[];this.ownRSS.filter(l=>{l.active&&n.push(l)}),t={method:"POST",url:"/news/"+this.id,headers:{"Content-Type":"application/json"},withCredentials:!0,data:{rss:n}},await h(t)&&(this.ownRSS=[],this.getPanelRSS())}},computed:{changes(){let t=!1;return this.displayRSS.filter(s=>{s.delete&&(t=!0)}),this.ownRSS.filter(s=>{s.active&&(t=!0)}),t}}},D=e("div",{class:"pt-4"},[e("h1",{class:"font-bold"},"Configure o feed de noticias"),e("span",null," Adicione ou remova fontes de noticias atraves do link RSS ")],-1),A={class:"flex flex-col gap-12 pt-12"},P={class:"flex flex-col gap-6"},z=e("span",null,[e("h2",{class:"font-bold text-2xl"},"Suas fontes")],-1),H=e("button",{type:"button",class:"bg-white rounded-full"},[e("image",{class:"w-full h-7",src:"/add.svg",alt:""})],-1),V={class:"w-full grid grid-cols-2 sm:grid-cols-8 gap-4"},N=["onClick"],F={class:"rounded-xl overflow-hidden"},M=["src"],O={class:"w-full overflow-hidden whitespace-nowrap text-ellipsis px-4 w-full bg-whi"},q={class:"font-bold text-center"},G=["onClick"],L={class:"rounded-xl overflow-hidden"},U=["src"],I={class:"w-full overflow-hidden whitespace-nowrap text-ellipsis px-4 w-full bg-whi"},J={class:"font-bold text-center"};function K(t,s,n,w,l,a){const _=p("HEADER"),m=p("submitButton");return i(),r(u,null,[e("header",null,[y(_),D]),e("div",A,[e("section",P,[z,e("form",{onSubmit:s[1]||(s[1]=b((...o)=>a.checkRSS&&a.checkRSS(...o),["prevent"])),class:"flex rounded py-2 bg-black"},[k(e("input",{type:"url",id:"rss",name:"rss","onUpdate:modelValue":s[0]||(s[0]=o=>l.rss=o),placeholder:"Adicionar nova fonte",class:"bg-black px-2 w-[90%] text-white"},null,512),[[C,l.rss]]),H],32),e("div",V,[(i(!0),r(u,null,S(l.displayRSS,(o,d)=>{var c;return i(),r("div",{class:"card",style:B((c=l.displayRSS[d])!=null&&c.delete?"border:3px solid red":"border:3px solid green"),onClick:Q=>l.displayRSS[d].delete=!l.displayRSS[d].delete},[e("div",F,[e("img",{src:o.icon||`https://www.google.com/s2/favicons?domain=${o.url}&sz=256`,alt:"",class:"w-full h-full cover",style:{padding:"2em",height:"12em","object-fit":"contain"}},null,8,M)]),e("div",O,[e("span",q,f(o.title),1)])],12,N)}),256)),(i(!0),r(u,null,S(l.ownRSS,(o,d)=>(i(),r("div",{class:"card",style:"border:3px solid orange",onClick:c=>a.remove(d)},[e("div",L,[e("img",{src:o.icon||`https://www.google.com/s2/favicons?domain=${o.url}&sz=256`,alt:"",class:"w-full h-full cover",style:{padding:"2em",height:"12em","object-fit":"cover"}},null,8,U)]),e("div",I,[e("span",J,f(o.title),1)])],8,G))),256))])]),e("section",null,[a.changes?(i(),E(m,{key:0,type:"submit",onClick:a.updateRSS,title:"Salvar alterações",class:"bg-[black] text-white text-xl"},null,8,["onClick"])):j("",!0)])])],64)}const X=v(T,[["render",K]]);export{X as default};
